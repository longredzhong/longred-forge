# yaml-language-server: $schema=https://raw.githubusercontent.com/prefix-dev/recipe-format/main/schema.json
context:
  version: 0.9.16
package:
  name: radar
  version: ${{ version }}
source:
- if: linux and x86_64
  then:
  - url: https://github.com/skyhook-io/radar/releases/download/v${{ version }}/radar_v${{
      version }}_linux_amd64.tar.gz
    sha256: ef057f6d2101e27dcd1d6b253aa9cb742e9086de061eb044ed0eb9a3537853e1
- if: linux and arm64
  then:
  - url: https://github.com/skyhook-io/radar/releases/download/v${{ version }}/radar_v${{
      version }}_linux_arm64.tar.gz
    sha256: c30d26db54b5de3c34ab2249bdd93513a6867ae5733946f042186255a360c0db
- if: osx and x86_64
  then:
  - url: https://github.com/skyhook-io/radar/releases/download/v${{ version }}/radar_v${{
      version }}_darwin_amd64.tar.gz
    sha256: 83efe1dd933fa630410e3d8e955379ac2c0f17b5dfb5e76c6b6b67b95d0852f5
- if: osx and arm64
  then:
  - url: https://github.com/skyhook-io/radar/releases/download/v${{ version }}/radar_v${{
      version }}_darwin_arm64.tar.gz
    sha256: c448a09f681888ff4ef931b4e66a5f8627cd770c46e368974c8eccbc12711ac2
- if: win and x86_64
  then:
  - url: https://github.com/skyhook-io/radar/releases/download/v${{ version }}/radar_v${{
      version }}_windows_amd64.zip
    sha256: ab5eb51448ece76983c0cdadd6ac62bf7f4ef9ccd4dd846ab0f70ecca794cd2a
build:
  number: 0
  dynamic_linking:
    binary_relocation: false
    rpath_allowlist:
    - '**/*'
  script: 'python -c "import os, shutil, stat, sys; prefix = os.environ.get(''PREFIX'');
    [exit(1) if not prefix else None]; bin_dir = os.path.join(prefix, ''bin'') if
    (sys.platform.startswith(''linux'') or sys.platform == ''darwin'') else os.path.join(prefix,
    ''Scripts''); binary_name = ''kubectl-radar'' if (sys.platform.startswith(''linux'')
    or sys.platform == ''darwin'') else ''kubectl-radar.exe''; os.makedirs(bin_dir,
    exist_ok=True); source_patterns = [binary_name, f''./{binary_name}'', os.path.join(''.'',
    binary_name)]; source_file = next((p for p in source_patterns if os.path.isfile(p)),
    None); [exit(1) if not source_file else None]; dest_file = os.path.join(bin_dir,
    binary_name); shutil.copy2(source_file, dest_file); (lambda: os.chmod(dest_file,
    os.stat(dest_file).st_mode | stat.S_IEXEC | stat.S_IXUSR | stat.S_IXGRP | stat.S_IXOTH)
    if (sys.platform.startswith(''linux'') or sys.platform == ''darwin'') else None)()"

    '
requirements:
  build: null
  run: null
tests:
- script:
  - kubectl-radar --version
about:
  homepage: https://github.com/skyhook-io/radar
  repository: https://github.com/skyhook-io/radar
  documentation: https://github.com/skyhook-io/radar/blob/main/docs
  license: Apache-2.0
  summary: Modern Kubernetes visibility - Local-first, no account, no cloud dependency
  description: 'Radar provides modern Kubernetes visibility with topology, event timeline,
    and service traffic.


    It features resource browsing, Helm management, and GitOps support for FluxCD
    and ArgoCD.


    Zero install on your cluster - runs on your laptop, talks to the K8s API directly.
    Single binary

    with no dependencies, no agents, no CRDs. Blazing fast with smart caching, progressive
    loading,

    and parallelization. Works in airgapped environments with no external network
    calls.

    '
extra:
  recipe-maintainers:
  - longredzhong
