# yaml-language-server: $schema=https://raw.githubusercontent.com/prefix-dev/recipe-format/main/schema.json
context:
  version: 0.9.14
package:
  name: radar
  version: ${{ version }}
source:
- if: linux and x86_64
  then:
  - url: https://github.com/skyhook-io/radar/releases/download/v${{ version }}/radar_v${{
      version }}_linux_amd64.tar.gz
    sha256: 89712b4bb331f6bcf140de9e7e44abc973eb97aadf15e2cd58e1b3d7d73e8b3e
- if: linux and arm64
  then:
  - url: https://github.com/skyhook-io/radar/releases/download/v${{ version }}/radar_v${{
      version }}_linux_arm64.tar.gz
    sha256: a31f63fe61eb8d4d8a7a5e3b50378f6ce1b6ea88e1481cbae099e8453a6c52d3
- if: osx and x86_64
  then:
  - url: https://github.com/skyhook-io/radar/releases/download/v${{ version }}/radar_v${{
      version }}_darwin_amd64.tar.gz
    sha256: 3acd6c1c9fbc3a42b36a707e17a2e7338a314e3765c496ffb0e32ad13c57195d
- if: osx and arm64
  then:
  - url: https://github.com/skyhook-io/radar/releases/download/v${{ version }}/radar_v${{
      version }}_darwin_arm64.tar.gz
    sha256: 4e507586ab5a1db95c8e5ec293def6e77cd180a2ce2f08f9db85ab7d9b8b33c6
- if: win and x86_64
  then:
  - url: https://github.com/skyhook-io/radar/releases/download/v${{ version }}/radar_v${{
      version }}_windows_amd64.zip
    sha256: cd6c321ea8063c0903458b1c7812844a264be66e86a3b313aa21a7f86bdb0c16
build:
  number: 0
  dynamic_linking:
    binary_relocation: false
    rpath_allowlist:
    - '**/*'
  script: 'python -c "import os, shutil, stat, sys; prefix = os.environ.get(''PREFIX'');
    [exit(1) if not prefix else None]; bin_dir = os.path.join(prefix, ''bin'') if
    (sys.platform.startswith(''linux'') or sys.platform == ''darwin'') else os.path.join(prefix,
    ''Scripts''); binary_name = ''kubectl-radar'' if (sys.platform.startswith(''linux'')
    or sys.platform == ''darwin'') else ''kubectl-radar.exe''; os.makedirs(bin_dir,
    exist_ok=True); source_patterns = [binary_name, f''./{binary_name}'', os.path.join(''.'',
    binary_name)]; source_file = next((p for p in source_patterns if os.path.isfile(p)),
    None); [exit(1) if not source_file else None]; dest_file = os.path.join(bin_dir,
    binary_name); shutil.copy2(source_file, dest_file); (lambda: os.chmod(dest_file,
    os.stat(dest_file).st_mode | stat.S_IEXEC | stat.S_IXUSR | stat.S_IXGRP | stat.S_IXOTH)
    if (sys.platform.startswith(''linux'') or sys.platform == ''darwin'') else None)()"

    '
requirements:
  build: null
  run: null
tests:
- script:
  - kubectl-radar --version
about:
  homepage: https://github.com/skyhook-io/radar
  repository: https://github.com/skyhook-io/radar
  documentation: https://github.com/skyhook-io/radar/blob/main/docs
  license: Apache-2.0
  summary: Modern Kubernetes visibility - Local-first, no account, no cloud dependency
  description: 'Radar provides modern Kubernetes visibility with topology, event timeline,
    and service traffic.


    It features resource browsing, Helm management, and GitOps support for FluxCD
    and ArgoCD.


    Zero install on your cluster - runs on your laptop, talks to the K8s API directly.
    Single binary

    with no dependencies, no agents, no CRDs. Blazing fast with smart caching, progressive
    loading,

    and parallelization. Works in airgapped environments with no external network
    calls.

    '
extra:
  recipe-maintainers:
  - longredzhong
